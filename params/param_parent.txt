% FOR PARENT DARK MATTER RUNS ONLY -----------------------------------

%----  Relevant files
InitCondFile         ICs/IC_parent_50Mpc_128_music
OutputDir            ./output_parent_50Mpc_128_music_DM_only
SnapshotFileBase     snapshot

%---- File formats
ICFormat             3
SnapFormat           3

%---- CPU-time limits
TimeLimitCPU              1728000   
CpuTimeBetRestartFile     7200    % 2h,  in seconds

%----- Memory allocation
MaxMemSize                4500    % in MByte

%---- Characteristics of run
TimeBegin                 0.01    % z=99 (1/(1+z) = 1/100)
TimeMax	                  1.0     % End of the simulation,   z = 0

%---- Basic code options that set the type of simulation
ComovingIntegrationOn     1

%---- Cosmological parameters
Omega0	                  0.3158     % MUST MATCH MUSIC!
OmegaLambda               0.6842     % MUST MATCH MUSIC!
OmegaBaryon               0    %0.04936    % MUST MATCH MUSIC!
HubbleParam               0.6732     % MUST MATCH MUSIC!
Hubble                    0.1
BoxSize                   50000         % kpc/h

%---- Output frequency and output parameters
OutputListOn              1
OutputListFilename        output_snapshots.txt
TimeBetSnapshot           1.067
TimeOfFirstSnapshot       0.02
TimeBetStatistics         0.01
NumFilesPerSnapshot       1
MaxFilesWithConcurrentIO  1

%---- Accuracy of time integration
ErrTolIntAccuracy        0.025       % Standard
CourantFac               0.15        % Slightly tighter (was 0.2)
MaxSizeTimestep          0.01
MinSizeTimestep          1e-11       % Was 1e-9, this is safer

%---- Adaptive Courant factor
%CourantFacMin          0.05
%CourantFacMax          0.4
%CourantFacDecay        0.7
%CourantFacRecover      1.01
%AdaptiveThreshold      1
%AdaptiveRecoverySteps  50

%---- Tree algorithm, force accuracy, domain update frequency
TypeOfOpeningCriterion                1
ErrTolTheta                           0.5
ErrTolThetaMax                        1.0
ErrTolForceAcc                        0.005
TopNodeFactor                         4.0

ActivePartFracForNewDomainDecomp      0.01
ActivePartFracForPMinsteadOfEwald     0.05


%---- System of units
UnitLength_in_cm         3.085678e21        ;  kpc/h
UnitMass_in_g            1.989e43           ;  1.0e10 Msun
UnitVelocity_in_cm_per_s 1e5                ;  1 km/sec
GravityConstantInternal  0

%---- Initial density estimate
DesNumNgb                        64      % Standard SPH neighbors
MaxNumNgbDeviation               8      % Standard deviation
DesLinkNgb                       20      

%---- SPH 
ArtBulkViscConst                 2.0        % Viscosity parameter
MinGasHsml                       0.005    % 0.5 kpc/h minimum smoothing length
MaxGasHsml                       10    
InitGasTemp                      462       
%MinGasTemp                       50         % Minimum temperature floor
MinEgySpec                       0.507          % No minimum energy

% ---- Gravitational softening lengths (Mpc/h)
% Gas (Type 0, Class 0)
SofteningComovingClass0    15      % 15 kpc/h
SofteningMaxPhysClass0     5      % 5 kpc/h physical

% DM (Type 1, Class 1) 
SofteningComovingClass1    15      % 15 kpc/h
SofteningMaxPhysClass1     5      % 5 kpc/h physical

% Other classes not used in uniform parent, but set anyway
SofteningComovingClass2    0.015
SofteningMaxPhysClass2     0.005

SofteningComovingClass3    0.015
SofteningMaxPhysClass3     0.005

SofteningComovingClass4    0.005      % Stars (if any form)
SofteningMaxPhysClass4     0.002

SofteningComovingClass5    0.015
SofteningMaxPhysClass5     0.005


% ---- Map particle types to classes
SofteningClassOfPartType0   0   ; Gas
SofteningClassOfPartType1   1   ; HR DM
SofteningClassOfPartType2   2   ; LR DM (use 3/5 for outer shells if present)
SofteningClassOfPartType3   3   ; (unused or additional LR shell)
SofteningClassOfPartType4   4   ; Stars
SofteningClassOfPartType5   5   ; (unused / outer LR)

%---- NGENIC Parameters (used ONLY when compiled with NGENIC)
%NSample                     256            % Grid size - set same as NGENIC in Config.sh
%GridSize                    256
%PowerSpectrumFile           empty.txt      % ICs/fixed_power_spectrum.txt
%PowerSpectrumType           1
%Sigma8                      0.811
%ReNormalizeInputSpectrum    1               % Apply Sigma8 normalization
%PrimordialIndex             0.965
%Seed                        246975
%SphereMode                  0
%InputSpectrum_UnitLength_in_cm 3.085678e21
%ShapeGamma                  0.21